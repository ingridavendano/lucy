var fs=require("fs"),bare=process.argv.splice(2)[0],css=bare.substring(0,bare.lastIndexOf("."))+".css",isEmpty=function(a){return Object.keys(a).length===0};fs.readFile(bare,"utf-8",function(a,b){if(a){throw a}bareBones(b)});var bareBones=function(d){var h,f;var j=function(k){return k.map(function(x,r){var p,o,l,v,q,w=0,t=[],n=[],m=false,u=x.match("[a-zA-Z.#@]+"),s;if(u!==null){s=u.index;if(typeof f==="undefined"&&s){f=s}}if(typeof f!=="undefined"){w=s/f}l=/^\s/.test(x);v=x.search(":")!="-1";if(typeof h==="undefined"&&v===true){u=x.match("[a-zA-z]");h=x.substr(0,u.index)}x=x.trim();if(x.charAt(0)==="@"){q=x}else{if(l===false&&!(x.charAt(0)==="@")){p=x}else{if(v===true){t.push(h+x.trimLeft())}else{if(l===true&&v===false){n.push(x);m=true}}}}return{variable:q,selector:p,declaration:t,children:n,child:m,indentLevel:w}})};var i=function(n){var m=[],p={},l={};function k(q,r){if(typeof n[q]==="undefined"){return}else{if(n[q].declaration.length){line=n[q].declaration.toString();o(line,r);q++;k(q,r)}}}function o(q,r){for(variable in p){if(p.hasOwnProperty(variable)){q=q.replace(variable,p[variable])}}r.push(q)}n.forEach(function(t,v){var x=m.length-1,r=n[v].indentLevel,u,s,w,z,y;if(t.variable){w=t.variable.split("=");u=w[0].trim();s=w[1].replace(";","").trim();p[u]=s}if(t.mixin){}if(t.selector){y=[],index=v+1,selector=t.selector;k(index,y);m.push({indentLevel:r,selector:selector,declarations:y,children:[]})}if(t.child&&t.children!=""){function q(D,E){var F=[],C=[],A=E.children.toString(),B=v+1;k(B,F);m.push({indentLevel:r,selector:A,declarations:F,children:[]})}q(m[x],t)}});return m};var e=function(k){var l=[];k.map(function(n,m){var o=m+1,q=m-1,p=function(r){m--;if(!k[m]){return}else{if(k[m].indentLevel===r){k[m].children.push(n);return}else{p(r)}}};if(n.indentLevel===0){l.push(n);return}if(n.indentLevel===1){p(0)}if(n.indentLevel===3){p(1)}if(n.indentLevel===4){p(3)}});return l};var c=function c(p){var o=" {\n",m="\n}",l=[],k,n,p,s;k=p.selector+" ";n=p.declarations.join("; \n")+";";s=k+o+n+m;if(!p.children.length){return[s]}else{var r=p.children.map(c).reduce(function(u,t){return u.concat(t)});var q=r.map(function(t){return k+t});q.unshift([s]);return q}};var b=function(k){var l=k.reduce(function(n,m){return n.concat(m)});return l.join("\n")};var g=j(d.split("\n"));var a=b(e(i(g)).map(c));fs.writeFile(css,a,function(k){if(k){throw k}console.log("Converted "+bare+" to "+css)})};